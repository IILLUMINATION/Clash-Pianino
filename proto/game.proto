syntax = "proto3";

package game;

option go_package = "./pb";

// --- CLIENT -> SERVER ---

message JoinQueueRequest {
  string player_id = 1;
  int32 trophies = 2;
}

// --- SERVER -> CLIENT ---

// Обертка для любого сообщения от сервера
message ServerResponse {
  oneof payload {
    MatchFoundResponse match_found = 1;
    GameStateUpdate game_state = 2;
  }
}

message MatchFoundResponse {
  string opponent_id = 1;
  int32 opponent_trophies = 2;
  string room_id = 3;
}

// Это сообщение прилетает 10 раз в секунду
message GameStateUpdate {
  float elixir = 1;         // Текущий эликсир
  repeated int32 hand = 2;  // 4 карты в руке (их ID)
  int32 next_card = 3;      // Следующая карта
  int32 server_tick = 4;    // Для синхронизации
}